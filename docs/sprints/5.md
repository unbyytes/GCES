# üìù Relat√≥rio de Contribui√ß√£o ‚Äì Sprint 5

**Disciplina:** Gest√£o de Configura√ß√£o e Evolu√ß√£o de Software

**Equipe:** OWASP (Times Blue e Red)

**Per√≠odo da Sprint:** 19/11/2025 - 02/12/2025

---

## 1. Objetivos da Sprint

### Blue Team

**Consolida√ß√£o da Estrat√©gia de Defesa e Entrega Final (DevSecOps + Hardening)**

* **Implementa√ß√£o Definitiva do Pipeline:** Integrar o arsenal de ferramentas selecionado (Gitleaks, Semgrep, Pip-audit, Trivy) no ambiente oficial de CI/CD, garantindo a execu√ß√£o automatizada dos testes de seguran√ßa.
* **Documenta√ß√£o T√©cnica das Ferramentas:** Criar documenta√ß√£o detalhada que explique como cada ferramenta mitiga riscos espec√≠ficos da modelagem de amea√ßas, sua configura√ß√£o na pipeline e crit√©rios de severidade.
* **Endurecimento (Hardening):** Realizar a revis√£o cr√≠tica das configura√ß√µes da aplica√ß√£o (Django) e da infraestrutura (Docker), aplicando corre√ß√µes para reduzir a superf√≠cie de ataque e adequar o projeto √†s boas pr√°ticas de seguran√ßa.
* **An√°lise e Governan√ßa:** Consolidar todos os artefatos de seguran√ßa gerados ao longo do semestre (Modelagem de Amea√ßas, Relat√≥rios de Vulnerabilidades e Proposta de WAF) em uma entrega √∫nica e estruturada via Pull Request.

### Red Team

- Produ√ß√£o de relat√≥rio no formato MITRE ATT&CK sobre XSS  
- Cria√ß√£o de guia de contribui√ß√£o segura para Jinja2  
- Hardening de HTTP Security Headers (CSP, HSTS, X-Content-Type-Options) e consolida√ß√£o de scripts reutiliz√°veis de PoC para o Red Team  

---

Voc√™ est√° absolutamente correto! Cometi um erro ao tentar ajustar a formata√ß√£o da tabela. A linha foi removida acidentalmente na reorganiza√ß√£o. Vamos restaur√°-la na posi√ß√£o correta. Aqui est√° a vers√£o corrigida da se√ß√£o 2. Entregas Coletivas:

---

## 2. Entregas Coletivas

| Entrega | Status | Link/Refer√™ncia | Observa√ß√µes |
| :--- | :--- | :--- | :--- |
| Relat√≥rio MITRE ATT&CK & Guia de Contribui√ß√£o de Seguran√ßa para Jinja2 | Conclu√≠do | [Relat√≥rio](/docs/diarios/221008703/mitre-xss.md) & [Guia de Contribui√ß√£o](https://gitlab.com/pencillabs/ej/ej-application/-/merge_requests/395) | Red Team |
| **Modelagem de Amea√ßas (DFD + STRIDE)** | Conclu√≠do | `[Link para Issue/Relat√≥rio]` | Blue Team |
| **Documenta√ß√£o T√©cnica das Ferramentas de Seguran√ßa** | Conclu√≠do | `[Link para sua documenta√ß√£o]` | Blue Team |
| **Sele√ß√£o e Defini√ß√£o do Arsenal de Seguran√ßa** | Conclu√≠do | `[Link para Issue/Doc]` | Blue Team |
| **Implementa√ß√£o do Pipeline DevSecOps (CI/CD)** | Conclu√≠do | `[Link para Issue/.gitlab-ci.yml]` | Blue Team |
| **Hardening de Aplica√ß√£o (Django) e Docker** | Conclu√≠do | `[Link para Issue/Doc]` | Blue Team |
| **Pull Request Master (Integra√ß√£o Total)** | Conclu√≠do | `[Link para o PR]` | Blue Team |
| Hardening de HTTP Security Headers + Biblioteca de Scripts de PoC | Conclu√≠do | [Issue #1512](https://gitlab.com/pencillabs/ej/ej-application/-/issues/1512), [MR #398](https://gitlab.com/pencillabs/ej/ej-application/-/merge_requests/398), [poc-scripts.md](/docs/diarios/221008098/poc-scripts.md), [Guia de Contribui√ß√£o](/docs/diarios/221008098/5.md) | Redu√ß√£o de risco (CVSS) e automa√ß√£o de testes de seguran√ßa |


---

Perfeito! Vou atualizar a se√ß√£o com a sua issue espec√≠fica:

---

## 3. Contribui√ß√µes Individuais

| Integrante    | Contribui√ß√µes                                         | Links (PRs, Issues, Docs)                      | Observa√ß√µes |
| ------------- | ----------------------------------------------------- | --------------------------------------------- | ----------- |
| Mateus Vieira | Relat√≥rio MITRE ATT&CK da vulnerabilidade XSS         | [Relat√≥rio](/docs/diarios/221008703/mitre-xss.md)    |  |
| Mateus Vieira | Guia de Contribui√ß√£o de Seguran√ßa para Jinja2         | [MR #395](https://gitlab.com/pencillabs/ej/ej-application/-/merge_requests/395)    |  |
| Ana Carolina Fialho| Documenta√ß√£o T√©cnica das Ferramentas de Seguran√ßa da Pipeline Blue Team | [Issue #1506](https://gitlab.com/pencillabs/ej/ej-application/-/issues/1506) | Documenta√ß√£o detalhada de Gitleaks, Semgrep, pip-audit e Trivy |
| Miguel Arthur | Mapeamento de Arquitetura e Modelagem de Amea√ßas (DFD + STRIDE) | [ISSUE #1508](gitlab.com/pencillabs/ej/ej-application/-/issues?show=eyJpaWQiOiIxNTA4IiwiZnVsbF9wYXRoIjoicGVuY2lsbGFicy9lai9lai1hcHBsaWNhdGlvbiIsImlkIjoxNzc4OTc5MjJ9) |  |
| Henrique Camelo Quenino | Hardening de HTTP Security Headers (CSP, HSTS, X-Content-Type-Options) e cria√ß√£o de biblioteca de scripts de PoC (XSS, SQLi, rate limiting, auditoria de headers) | [Issue #1512](https://gitlab.com/pencillabs/ej/ej-application/-/issues/1512), [MR #398](https://gitlab.com/pencillabs/ej/ej-application/-/merge_requests/398), [poc-scripts.md](/docs/diarios/221008098/poc-scripts.md), [Guia de Contribui√ß√£o](/docs/diarios/221008098/5.md) | Foco em mitiga√ß√£o pr√°tica e automatiza√ß√£o para o Red Team |

---

## 4. Maiores Avan√ßos

### Blue Team

**1. Maturidade em DevSecOps (Do Zero ao Pipeline Ativo)**
O maior avan√ßo desta sprint final foi transformar conceitos te√≥ricos em uma esteira de defesa funcional. Sa√≠mos de um projeto sem verifica√ß√µes de seguran√ßa para um pipeline robusto que audita automaticamente:
* **Segredos** (Gitleaks);
* **C√≥digo/SAST** (Semgrep);
* **Depend√™ncias** (Pip-audit);
* **Infraestrutura/IaC** (Trivy).

**2. Documenta√ß√£o T√©cnica de Ferramentas de Seguran√ßa**
Criamos uma documenta√ß√£o abrangente que conecta cada ferramenta implementada aos riscos espec√≠ficos da modelagem de amea√ßas, incluindo:
* **Gitleaks** ‚Üí Mitiga√ß√£o de "Vazamento de Credenciais/Segredos" (risco Cr√≠tico)
* **Semgrep** ‚Üí Detec√ß√£o de "Inje√ß√£o de C√≥digo" como SQL Injection e XSS (risco Cr√≠tico)
* **pip-audit** ‚Üí Preven√ß√£o de explora√ß√£o de vulnerabilidades em bibliotecas de terceiros
* **Trivy** ‚Üí An√°lise multifacetada (filesystem, container, configura√ß√µes) para prevenir "Elevation of Privilege"

**3. Hardening e Cultura de Preven√ß√£o**
Al√©m de detectar falhas, a equipe avan√ßou para a camada de preven√ß√£o (*hardening*). A revis√£o das configura√ß√µes do Django e a refatora√ß√£o do Dockerfile para rodar sem privil√©gios de root demonstraram uma compreens√£o profunda de como mitigar riscos na arquitetura, indo al√©m do uso superficial de ferramentas.

**4. Integra√ß√£o Total via "Master PR"**
Conseguimos superar a fragmenta√ß√£o das tarefas individuais. A cria√ß√£o de um Pull Request unificado consolidou a modelagem de amea√ßas, a implementa√ß√£o t√©cnica, os relat√≥rios de an√°lise e a documenta√ß√£o das ferramentas, entregando uma solu√ß√£o de seguran√ßa completa e documentada para o projeto EJ-Platform.

### Red Team

#### Relat√≥rio MITRE ATT&CK

Um relat√≥rio MITRE ATT&CK √© um documento ou registro que organiza e descreve informa√ß√µes sobre t√©cnicas, t√°ticas e procedimentos (TTPs) utilizados por agentes maliciosos (hackers, malware, grupos de APTs) para atacar sistemas de informa√ß√£o. Ele se baseia na matriz MITRE ATT&CK, que √© um framework amplamente utilizado em ciberseguran√ßa.

O relat√≥rio sobre a explora√ß√£o da falha de XSS na `ej-application` pode ser encontrado aqui: [Relat√≥rio](/docs/diarios/221008703/mitre-xss.md)

#### Guia de Contribui√ß√£o Jinja2

O Guia de Contribui√ß√£o foi criado para:

- Padronizar implementa√ß√µes seguras com Jinja2 no projeto.
- Alertar sobre o uso incorreto de filtros como `|safe`.
- Refor√ßar a necessidade de valida√ß√£o e sanitiza√ß√£o no backend.
- Oferecer exemplos seguros e inseguros para compara√ß√£o.
- Estabelecer diretrizes m√≠nimas para lidar com HTML din√¢mico.

[Guia de Contribui√ß√£o](https://gitlab.com/pencillabs/ej/ej-application/-/merge_requests/395)

#### Hardening de HTTP Headers e Scripts de PoC

Foi implementado um conjunto de tr√™s headers de seguran√ßa (CSP, HSTS, X-Content-Type-Options) na `ej-application`, reduzindo o CVSS de 5.9 (Medium) para aproximadamente 2.0 (Low) ao mitigar vetores de XSS, downgrade de HTTPS e MIME sniffing. 
Al√©m disso, foi criada a biblioteca `poc-scripts.md`, com scripts de PoC reutiliz√°veis para XSS refletido, SQL Injection, rate limiting e valida√ß√£o de headers, permitindo auditorias mais r√°pidas e consistentes pelo Red Team.

---

## 5. Maiores Dificuldades

### Blue Team

* **Hardening em Aplica√ß√£o Existente:** Aplicar configura√ß√µes de seguran√ßa estritas (como desativar `DEBUG` ou alterar permiss√µes de usu√°rio no Docker) gerou conflitos de compatibilidade, exigindo testes manuais para n√£o quebrar funcionalidades do sistema.

* **Gest√£o de Falsos Positivos:** A ferramenta de an√°lise de depend√™ncias (`pip-audit`) apontou diversas vulnerabilidades em pacotes antigos, exigindo um esfor√ßo significativo de triagem manual para distinguir riscos reais de alertas n√£o explor√°veis.

* **Documenta√ß√£o T√©cnica Clara:** Criar documenta√ß√£o que fosse t√©cnica o suficiente para desenvolvedores implementarem as ferramentas, mas tamb√©m clara para stakeholders entenderem o valor e funcionamento de cada solu√ß√£o de seguran√ßa.

* **Consolida√ß√£o de Artefatos:** Unificar entregas de naturezas muito distintas ‚Äî diagramas visuais (DFD), c√≥digo de pipeline (YAML), documenta√ß√£o t√©cnica e relat√≥rios de texto ‚Äî em um √∫nico Pull Request coeso e organizado foi um desafio de documenta√ß√£o.

### Red Team

- N√£o houve dificuldades durante o processo de estudo e documenta√ß√£o  

---

## 6. Li√ß√µes Aprendidas

### Blue Team

* **Seguran√ßa como C√≥digo (IaC):** Aprendemos que a seguran√ßa n√£o se limita ao c√≥digo da aplica√ß√£o; as configura√ß√µes de infraestrutura (`Dockerfile`) e do framework (`settings.py`) s√£o vetores cr√≠ticos que exigem versionamento e auditoria cont√≠nua.

* **Documenta√ß√£o como Ponte entre Teoria e Pr√°tica:** A elabora√ß√£o da documenta√ß√£o t√©cnica refor√ßou a import√¢ncia de conectar explicitamente cada ferramenta de seguran√ßa aos riscos da modelagem de amea√ßas, criando uma narrativa clara sobre "por que" cada ferramenta foi escolhida e "como" ela mitiga riscos espec√≠ficos.

* **O Valor do Shift-Left:** A implementa√ß√£o do pipeline confirmou que identificar vulnerabilidades (como chaves vazadas) no momento do *push* √© muito mais eficiente e menos custoso do que tentar remediar problemas em um software j√° constru√≠do.

* **Documenta√ß√£o √© Governan√ßa:** A necessidade de unificar o trabalho no PR final refor√ßou que, em seguran√ßa, a documenta√ß√£o t√©cnica (por que escolhemos tal ferramenta, como mitigamos tal risco) √© t√£o importante quanto a pr√≥pria implementa√ß√£o para garantir a continuidade do projeto.

* **Crit√©rios Claros de Aceita√ß√£o:** Estabelecer crit√©rios baseados em severidade (Cr√≠tico ‚Üí FAIL, Alto ‚Üí FAIL, M√©dio ‚Üí WARNING) automatiza a tomada de decis√£o na pipeline e alinha o time sobre o que realmente precisa ser corrigido imediatamente.

### Red Team

- Uso do MITRE ATT&CK para estruturar relat√≥rios de vulnerabilidades  
- Como criar documenta√ß√£o de contribui√ß√£o focada em seguran√ßa (Jinja2)  
- Import√¢ncia de headers HTTP de seguran√ßa (CSP, HSTS, X-Content-Type-Options) como primeira camada de defesa em aplica√ß√µes web  
- Benef√≠cios de consolidar scripts automatizados de PoC para padronizar testes de seguran√ßa e apoiar o trabalho cont√≠nuo do Red Team
